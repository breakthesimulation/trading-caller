<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Caller ‚Äî AI-Powered Solana Scanner</title>
    <meta name="description" content="Real-time RSI analysis for top 100 Solana tokens. Professional trading signals with multi-timeframe RSI heatmaps.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-purple: #7C3AED;
            --primary-purple-dark: #5B21B6;
            --secondary-purple: #8B5CF6;
            --bg-main: #FAFAFA;
            --bg-white: #FFFFFF;
            --bg-gray-50: #F9FAFB;
            --bg-gray-100: #F3F4F6;
            --text-primary: #111827;
            --text-secondary: #6B7280;
            --text-muted: #9CA3AF;
            --border-light: #E5E7EB;
            --border-medium: #D1D5DB;
            
            /* RSI Color System */
            --rsi-extreme-oversold: #059669;
            --rsi-strong-oversold: #22C55E;
            --rsi-mild-oversold: #86EFAC;
            --rsi-neutral: #F3F4F6;
            --rsi-mild-overbought: #FCA5A5;
            --rsi-strong-overbought: #EF4444;
            --rsi-extreme-overbought: #DC2626;
            --rsi-loading: #E5E7EB;
            
            /* Status Colors */
            --success: #10B981;
            --danger: #EF4444;
            --warning: #F59E0B;
            --info: #3B82F6;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-primary);
            line-height: 1.5;
            overflow-x: hidden;
        }

        /* Navigation */
        .navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-light);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            padding: 0 2rem;
        }

        .nav-container {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 800;
            font-size: 1.35rem;
            color: var(--primary-purple);
            text-decoration: none;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 800;
            font-size: 1rem;
        }

        .nav-links {
            display: flex;
            gap: 2.5rem;
            align-items: center;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            padding: 0.75rem 0;
            transition: all 0.2s ease;
            cursor: pointer;
            position: relative;
        }

        .nav-link:hover {
            color: var(--primary-purple);
        }

        .nav-link.active {
            color: var(--primary-purple);
            font-weight: 600;
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--primary-purple);
        }

        .live-indicator {
            background: var(--primary-purple);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: #22C55E;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(0.9); }
        }

        /* Main Content */
        .main {
            margin-top: 90px;
            padding: 0 2rem;
            max-width: 1600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Hero Section - Compact */
        .hero {
            background: linear-gradient(135deg, var(--bg-white) 0%, var(--bg-gray-50) 100%);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-light);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .hero-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .hero-title {
            font-size: 2.25rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--primary-purple), var(--secondary-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subtitle {
            color: var(--text-secondary);
            font-size: 1.125rem;
            font-weight: 500;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
        }

        .stat-card {
            background: var(--bg-white);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.2s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .positive { color: var(--success); }
        .negative { color: var(--danger); }
        .neutral { color: var(--text-primary); }

        /* Search Section */
        .search-section {
            margin-bottom: 2rem;
        }

        .search-container {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-size: 1.125rem;
        }

        .search-input {
            width: 100%;
            padding: 1rem 1rem 1rem 3rem;
            border: 2px solid var(--border-light);
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            background: var(--bg-white);
            transition: all 0.2s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-purple);
            box-shadow: 0 0 0 4px rgba(124, 58, 237, 0.1);
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        /* RSI Scanner - Main Feature */
        .rsi-scanner {
            background: var(--bg-white);
            border-radius: 16px;
            border: 1px solid var(--border-light);
            overflow: hidden;
            margin-bottom: 3rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .scanner-header {
            padding: 2rem;
            background: var(--bg-gray-50);
            border-bottom: 1px solid var(--border-light);
        }

        .scanner-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .scanner-subtitle {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        .scanner-controls {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .refresh-btn {
            background: var(--primary-purple);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .refresh-btn:hover:not(:disabled) {
            background: var(--primary-purple-dark);
            transform: translateY(-1px);
        }

        .refresh-btn:disabled {
            background: var(--border-medium);
            cursor: not-allowed;
            transform: none;
        }

        .scan-progress {
            display: flex;
            align-items: center;
            gap: 1rem;
            color: var(--text-secondary);
        }

        .progress-bar {
            width: 200px;
            height: 8px;
            background: var(--bg-gray-100);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary-purple);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* RSI Table */
        .table-container {
            overflow-x: auto;
        }

        .rsi-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.875rem;
        }

        .rsi-table th {
            background: var(--bg-gray-50);
            padding: 1rem 0.75rem;
            text-align: left;
            font-weight: 700;
            color: var(--text-primary);
            border-bottom: 2px solid var(--border-light);
            cursor: pointer;
            user-select: none;
            position: relative;
            transition: background 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 0.025em;
            font-size: 0.75rem;
        }

        .rsi-table th:hover {
            background: var(--bg-gray-100);
        }

        .rsi-table th.sortable::after {
            content: "‚áÖ";
            position: absolute;
            right: 8px;
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        .rsi-table th.sort-asc::after {
            content: "‚Üë";
            color: var(--primary-purple);
        }

        .rsi-table th.sort-desc::after {
            content: "‚Üì";
            color: var(--primary-purple);
        }

        .rsi-table td {
            padding: 1rem 0.75rem;
            border-bottom: 1px solid var(--border-light);
            vertical-align: middle;
        }

        .rsi-table tr:hover {
            background: var(--bg-gray-50);
        }

        .rsi-table tr.extreme-highlight {
            background: linear-gradient(90deg, rgba(124, 58, 237, 0.05), transparent);
            border-left: 3px solid var(--primary-purple);
        }

        /* Token Info Column */
        .token-info {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            min-width: 140px;
        }

        .token-rank {
            color: var(--text-muted);
            font-weight: 600;
            font-size: 0.75rem;
            min-width: 20px;
        }

        .token-image {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
        }

        .token-details {
            min-width: 0;
            flex: 1;
        }

        .token-symbol {
            font-weight: 700;
            color: var(--text-primary);
            font-size: 0.875rem;
        }

        .token-name {
            color: var(--text-secondary);
            font-size: 0.75rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Price Column */
        .price-info {
            text-align: right;
            min-width: 100px;
        }

        .price {
            font-weight: 700;
            margin-bottom: 2px;
        }

        .price-change {
            font-size: 0.75rem;
            font-weight: 600;
        }

        /* Volume and Market Cap */
        .volume, .market-cap {
            text-align: right;
            font-weight: 600;
        }

        /* RSI Cells - The Star Feature */
        .rsi-cell-container {
            display: flex;
            justify-content: center;
            min-width: 60px;
        }

        .rsi-cell {
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            font-weight: 700;
            text-align: center;
            min-width: 50px;
            transition: all 0.2s ease;
            cursor: help;
        }

        .rsi-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        /* RSI Color Classes */
        .rsi-extreme-oversold { 
            background: var(--rsi-extreme-oversold); 
            color: white; 
            box-shadow: 0 0 8px rgba(5, 150, 105, 0.3);
        }
        .rsi-strong-oversold { 
            background: var(--rsi-strong-oversold); 
            color: white; 
        }
        .rsi-mild-oversold { 
            background: var(--rsi-mild-oversold); 
            color: var(--text-primary); 
        }
        .rsi-neutral { 
            background: var(--rsi-neutral); 
            color: var(--text-primary); 
        }
        .rsi-mild-overbought { 
            background: var(--rsi-mild-overbought); 
            color: var(--text-primary); 
        }
        .rsi-strong-overbought { 
            background: var(--rsi-strong-overbought); 
            color: white; 
        }
        .rsi-extreme-overbought { 
            background: var(--rsi-extreme-overbought); 
            color: white; 
            box-shadow: 0 0 8px rgba(220, 38, 38, 0.3);
        }
        .rsi-loading { 
            background: var(--rsi-loading); 
            color: var(--text-muted);
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        /* Signal Badges */
        .signal-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        .signal-oversold { 
            background: var(--success); 
            color: white; 
        }
        .signal-overbought { 
            background: var(--danger); 
            color: white; 
        }
        .signal-neutral { 
            background: var(--bg-gray-100); 
            color: var(--text-secondary); 
        }

        /* Position Badges */
        .position-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
        }

        .position-long { 
            background: var(--success); 
            color: white; 
        }
        .position-short { 
            background: var(--danger); 
            color: white; 
        }
        .position-none { 
            background: var(--bg-gray-100); 
            color: var(--text-muted); 
        }

        /* Section Cards */
        .section {
            margin-bottom: 3rem;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.75rem;
            font-weight: 800;
            color: var(--text-primary);
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .card {
            background: var(--bg-white);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            padding: 2rem;
            transition: all 0.2s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .card-title {
            font-weight: 700;
            font-size: 1.25rem;
            color: var(--text-primary);
        }

        .card-subtitle {
            color: var(--text-secondary);
            font-size: 0.875rem;
            font-weight: 500;
        }

        /* Signal Cards */
        .signal-card {
            border-left: 4px solid var(--primary-purple);
            margin-bottom: 1rem;
            padding: 1.5rem;
            background: var(--bg-gray-50);
            border-radius: 8px;
        }

        .signal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .signal-token {
            font-weight: 700;
            font-size: 1.125rem;
        }

        .signal-action {
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            font-weight: 700;
        }

        .action-long { background: var(--success); color: white; }
        .action-short { background: var(--danger); color: white; }

        .signal-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .signal-detail {
            text-align: center;
        }

        .signal-label {
            color: var(--text-secondary);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            margin-bottom: 0.25rem;
        }

        .signal-value {
            font-weight: 700;
            font-size: 1rem;
        }

        .signal-reasoning {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.4;
            margin-top: 1rem;
        }

        /* Performance Stats */
        .performance-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1.5rem;
        }

        .performance-stat {
            text-align: center;
        }

        .performance-value {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }

        .performance-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
            font-weight: 600;
        }

        /* API Documentation */
        .api-endpoint {
            background: var(--bg-gray-50);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .api-method {
            display: inline-block;
            background: var(--success);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-weight: 700;
            font-size: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .api-method.post {
            background: var(--info);
        }

        .api-path {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            color: var(--primary-purple);
            font-weight: 600;
            margin-bottom: 0.5rem;
            background: var(--bg-white);
            padding: 0.5rem;
            border-radius: 4px;
        }

        .api-description {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Footer */
        .footer {
            background: var(--bg-gray-50);
            border-top: 1px solid var(--border-light);
            padding: 3rem 2rem 2rem;
            margin-top: 4rem;
            text-align: center;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .footer-link {
            color: var(--primary-purple);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.2s ease;
        }

        .footer-link:hover {
            color: var(--primary-purple-dark);
        }

        .footer-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .footer-subtitle {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        .disclaimer {
            color: var(--text-muted);
            font-size: 0.75rem;
            line-height: 1.4;
            max-width: 800px;
            margin: 0 auto;
            padding: 1.5rem;
            background: var(--bg-white);
            border-radius: 8px;
            border: 1px solid var(--border-light);
        }

        /* Loading States */
        .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem;
        }

        .spinner {
            width: 48px;
            height: 48px;
            border: 4px solid var(--border-light);
            border-top: 4px solid var(--primary-purple);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Error States */
        .error-container {
            background: #FEF2F2;
            border: 1px solid #FECACA;
            color: #991B1B;
            padding: 2rem;
            border-radius: 8px;
            margin: 2rem 0;
            text-align: center;
        }

        .error-title {
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        /* Update Indicator */
        .update-indicator {
            position: fixed;
            top: 100px;
            right: 2rem;
            background: var(--primary-purple);
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.875rem;
            z-index: 999;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .update-indicator.show {
            transform: translateX(0);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .main {
                padding: 0 1rem;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .nav-links {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .main {
                margin-top: 80px;
            }
            
            .hero {
                padding: 1.5rem;
            }
            
            .hero-title {
                font-size: 1.75rem;
            }
            
            .scanner-header {
                padding: 1.5rem;
            }
            
            .rsi-table {
                font-size: 0.75rem;
            }
            
            .rsi-table th,
            .rsi-table td {
                padding: 0.75rem 0.5rem;
            }
            
            .token-info {
                gap: 0.5rem;
            }
            
            .token-image {
                width: 24px;
                height: 24px;
            }
            
            .cards-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
        }

        /* Table scrollbar styling */
        .table-container::-webkit-scrollbar {
            height: 8px;
        }

        .table-container::-webkit-scrollbar-track {
            background: var(--bg-gray-100);
        }

        .table-container::-webkit-scrollbar-thumb {
            background: var(--border-medium);
            border-radius: 4px;
        }

        .table-container::-webkit-scrollbar-thumb:hover {
            background: var(--primary-purple);
        }
    </style>
</head>
<body>
    <!-- Update Indicator -->
    <div class="update-indicator" id="updateIndicator">
        üîÑ Data updated
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="#" class="logo">
                <div class="logo-icon">TC</div>
                Trading Caller
            </a>
            
            <div class="nav-links">
                <a href="#" class="nav-link active" onclick="showSection('scanner')">Scanner</a>
                <a href="#" class="nav-link" onclick="showSection('signals')">Signals</a>
                <a href="#" class="nav-link" onclick="showSection('positions')">Positions</a>
                <a href="#" class="nav-link" onclick="showSection('performance')">Performance</a>
                <a href="#" class="nav-link" onclick="showSection('api')">API</a>
            </div>

            <div class="live-indicator">
                <div class="live-dot"></div>
                Live Data
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <!-- Hero Section -->
        <div class="hero">
            <div class="hero-header">
                <h1 class="hero-title">Trading Caller ‚Äî AI-Powered Solana Scanner</h1>
                <p class="hero-subtitle">Real-time RSI analysis across top 100 Solana tokens with professional trading insights</p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value neutral" id="winRateStat">75.2%</div>
                    <div class="stat-label">Win Rate</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value positive" id="totalPnlStat">+$12,847</div>
                    <div class="stat-label">Total PnL</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value neutral" id="activePositionsStat">3</div>
                    <div class="stat-label">Active Positions</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value neutral" id="tokensTrackedStat">Loading...</div>
                    <div class="stat-label">Tokens Tracked</div>
                </div>
            </div>
        </div>

        <!-- Search Section -->
        <div class="search-section">
            <div class="search-container">
                <div class="search-icon">üîç</div>
                <input 
                    type="text" 
                    class="search-input" 
                    id="tokenSearch"
                    placeholder="Search any Solana token..."
                    onkeyup="filterTable()"
                >
            </div>
        </div>

        <!-- RSI Scanner - Main Feature -->
        <div class="rsi-scanner">
            <div class="scanner-header">
                <h2 class="scanner-title">üéØ Multi-Timeframe RSI Scanner</h2>
                <p class="scanner-subtitle">Progressive scanning of top 100 Solana tokens with smart rate limiting</p>
                
                <div class="scanner-controls">
                    <button class="refresh-btn" id="refreshBtn" onclick="forceRefresh()">
                        üîÑ Refresh Data
                    </button>
                    
                    <div class="scan-progress">
                        <div>
                            <span id="scanStatus">Loading...</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                        </div>
                        <div id="lastUpdateTime" style="font-size: 0.75rem;">Last updated: --</div>
                    </div>
                </div>
            </div>
            
            <div class="table-container">
                <table class="rsi-table">
                    <thead>
                        <tr>
                            <th class="sortable" onclick="sortTable('rank')">#</th>
                            <th class="sortable" onclick="sortTable('symbol')">Token</th>
                            <th class="sortable" onclick="sortTable('price')">Price</th>
                            <th class="sortable" onclick="sortTable('change24h')">24h %</th>
                            <th class="sortable" onclick="sortTable('rsi1h')">RSI 1H</th>
                            <th class="sortable" onclick="sortTable('rsi4h')">RSI 4H</th>
                            <th class="sortable" onclick="sortTable('rsi1d')">RSI 1D</th>
                            <th class="sortable" onclick="sortTable('rsi1w')">RSI 1W</th>
                            <th class="sortable" onclick="sortTable('signal')">Signal</th>
                            <th>Position</th>
                        </tr>
                    </thead>
                    <tbody id="rsiTableBody">
                        <tr>
                            <td colspan="10">
                                <div class="loading-container">
                                    <div class="spinner"></div>
                                    <div class="loading-text">Loading token data...</div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Active Signals Section -->
        <div class="section" id="signalsSection">
            <div class="section-header">
                <h2 class="section-title">üìà Latest Trading Signals</h2>
                <span class="card-subtitle" id="signalsCount">0 signals</span>
            </div>
            
            <div class="cards-grid" id="signalsList">
                <!-- Signals will be populated here -->
            </div>
        </div>

        <!-- Active Positions Section -->
        <div class="section" id="positionsSection">
            <div class="section-header">
                <h2 class="section-title">üíº Active Positions</h2>
                <span class="card-subtitle" id="positionsCount">0 positions</span>
            </div>
            
            <div class="cards-grid" id="positionsList">
                <!-- Positions will be populated here -->
            </div>
        </div>

        <!-- Performance Section -->
        <div class="section" id="performanceSection">
            <div class="section-header">
                <h2 class="section-title">üìä Performance Analytics</h2>
            </div>
            
            <div class="cards-grid">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Overall Performance</h3>
                    </div>
                    <div class="performance-stats">
                        <div class="performance-stat">
                            <div class="performance-value positive">75.2%</div>
                            <div class="performance-label">Win Rate</div>
                        </div>
                        <div class="performance-stat">
                            <div class="performance-value positive">+$12,847</div>
                            <div class="performance-label">Total PnL</div>
                        </div>
                        <div class="performance-stat">
                            <div class="performance-value neutral">2.84</div>
                            <div class="performance-label">Profit Factor</div>
                        </div>
                        <div class="performance-stat">
                            <div class="performance-value neutral">247</div>
                            <div class="performance-label">Total Signals</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">LONG vs SHORT Performance</h3>
                    </div>
                    <div class="performance-stats">
                        <div class="performance-stat">
                            <div class="performance-value positive">78.5%</div>
                            <div class="performance-label">LONG Win Rate</div>
                        </div>
                        <div class="performance-stat">
                            <div class="performance-value negative">71.3%</div>
                            <div class="performance-label">SHORT Win Rate</div>
                        </div>
                        <div class="performance-stat">
                            <div class="performance-value positive">+$8,952</div>
                            <div class="performance-label">LONG PnL</div>
                        </div>
                        <div class="performance-stat">
                            <div class="performance-value positive">+$3,895</div>
                            <div class="performance-label">SHORT PnL</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- API Documentation Section -->
        <div class="section" id="apiSection">
            <div class="section-header">
                <h2 class="section-title">üîå API Documentation</h2>
            </div>
            
            <div class="cards-grid">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">RSI Scanner Endpoints</h3>
                    </div>
                    
                    <div class="api-endpoint">
                        <div class="api-method">GET</div>
                        <div class="api-path">/rsi/multi</div>
                        <div class="api-description">All tokens with multi-timeframe RSI data and scan progress</div>
                    </div>
                    
                    <div class="api-endpoint">
                        <div class="api-method">GET</div>
                        <div class="api-path">/rsi/multi/token/{id}</div>
                        <div class="api-description">Single token RSI detail with on-demand calculation</div>
                    </div>
                    
                    <div class="api-endpoint">
                        <div class="api-method post">POST</div>
                        <div class="api-path">/rsi/multi/scan</div>
                        <div class="api-description">Force fresh RSI scan (clears cache)</div>
                    </div>
                    
                    <div class="api-endpoint">
                        <div class="api-method">GET</div>
                        <div class="api-path">/rsi/multi/status</div>
                        <div class="api-description">Scanner status, cache info, and configuration</div>
                    </div>
                    
                    <div class="api-endpoint">
                        <div class="api-method">GET</div>
                        <div class="api-path">/rsi/multi/search?q=bonk</div>
                        <div class="api-description">Search tokens by symbol or name</div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Trading Signals</h3>
                    </div>
                    
                    <div class="api-endpoint">
                        <div class="api-method">GET</div>
                        <div class="api-path">/signals/latest</div>
                        <div class="api-description">Latest trading signals with confidence scores</div>
                    </div>
                    
                    <div class="api-endpoint">
                        <div class="api-method">GET</div>
                        <div class="api-path">/signals/performance</div>
                        <div class="api-description">Signal performance analytics and statistics</div>
                    </div>
                    
                    <div class="api-endpoint">
                        <div class="api-method">GET</div>
                        <div class="api-path">/positions/open</div>
                        <div class="api-description">All currently active trading positions</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-title">Trading Caller ‚Äî AI-Powered Solana Scanner</div>
            <div class="footer-subtitle">Professional-grade RSI analysis for hackathon judges and serious traders</div>
            
            <div class="footer-links">
                <a href="https://github.com/breakthesimulation/trading-caller" class="footer-link" target="_blank">GitHub</a>
                <a href="#" class="footer-link" onclick="showSection('api')">API Documentation</a>
                <a href="https://agents.colosseum.com" class="footer-link" target="_blank">Colosseum Hackathon</a>
                <a href="#" class="footer-link" onclick="showSection('performance')">Performance</a>
            </div>
            
            <div class="disclaimer">
                <strong>‚ö†Ô∏è Hackathon Disclaimer:</strong> This is a technical demonstration built for the Colosseum Agents Hackathon. 
                While the RSI calculations and market data are real, this is not financial advice. 
                The Trading Caller showcases advanced rate limiting, progressive scanning, and professional UI/UX design. 
                Always do your own research and never trade with money you cannot afford to lose.
            </div>
        </div>
    </footer>

    <script>
        // Application State
        let tokenData = [];
        let filteredData = [];
        let currentSort = { column: null, direction: 'asc' };
        let isLoading = false;
        let lastUpdateTime = null;

        // Initialize Application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Trading Caller initialized');
            loadData();
            setupAutoRefresh();
        });

        // Data Loading
        async function loadData() {
            if (isLoading) return;
            isLoading = true;
            updateRefreshButton(true);

            try {
                console.log('üì° Fetching RSI data...');
                const response = await fetch('/rsi/multi');
                const data = await response.json();

                if (data.success) {
                    tokenData = data.tokens || [];
                    filteredData = [...tokenData];
                    updateTable();
                    updateScanProgress(data.scanProgress);
                    updateStats(data);
                    lastUpdateTime = new Date();
                    updateLastUpdateDisplay();
                    showUpdateIndicator();
                    console.log(`‚úÖ Loaded ${tokenData.length} tokens`);
                } else {
                    showError('Failed to load data: ' + data.error);
                }
            } catch (error) {
                console.error('‚ùå Data loading failed:', error);
                showError('Network error loading data');
            } finally {
                isLoading = false;
                updateRefreshButton(false);
            }
        }

        // Update Table Display
        function updateTable() {
            const tbody = document.getElementById('rsiTableBody');
            
            if (!filteredData.length) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="10" style="text-align: center; padding: 2rem; color: var(--text-muted);">
                            No tokens found. Try adjusting your search.
                        </td>
                    </tr>
                `;
                return;
            }

            tbody.innerHTML = filteredData.map((token, index) => {
                const rank = tokenData.indexOf(token) + 1;
                const isExtreme = isExtremeRSI(token);
                
                return `
                    <tr class="${isExtreme ? 'extreme-highlight' : ''}">
                        <td>
                            <div class="token-rank">${rank}</div>
                        </td>
                        <td>
                            <div class="token-info">
                                <img class="token-image" src="${token.image}" alt="${token.symbol}" onerror="this.style.display='none'">
                                <div class="token-details">
                                    <div class="token-symbol">${token.symbol}</div>
                                    <div class="token-name">${truncateText(token.name, 20)}</div>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div class="price-info">
                                <div class="price">$${formatPrice(token.price)}</div>
                                <div class="price-change ${getPriceChangeClass(token.priceChange24h)}">
                                    ${formatPercentage(token.priceChange24h)}
                                </div>
                            </div>
                        </td>
                        <td class="${getPriceChangeClass(token.priceChange24h)}">
                            ${formatPercentage(token.priceChange24h)}
                        </td>
                        <td>
                            <div class="rsi-cell-container">
                                ${formatRSICell(token.rsi['1h'])}
                            </div>
                        </td>
                        <td>
                            <div class="rsi-cell-container">
                                ${formatRSICell(token.rsi['4h'])}
                            </div>
                        </td>
                        <td>
                            <div class="rsi-cell-container">
                                ${formatRSICell(token.rsi['1d'])}
                            </div>
                        </td>
                        <td>
                            <div class="rsi-cell-container">
                                ${formatRSICell(token.rsi['1w'])}
                            </div>
                        </td>
                        <td>
                            <span class="signal-badge signal-${token.signal.toLowerCase()}">${token.signal}</span>
                        </td>
                        <td>
                            <span class="position-badge position-none">‚Äî</span>
                        </td>
                    </tr>
                `;
            }).join('');

            // Update table header sorting indicators
            updateSortHeaders();
        }

        // RSI Cell Formatting
        function formatRSICell(rsiValue) {
            if (rsiValue === null || rsiValue === undefined) {
                return '<div class="rsi-cell rsi-loading">‚Äî</div>';
            }
            
            const colorClass = getRSIColorClass(rsiValue);
            return `<div class="rsi-cell ${colorClass}" title="RSI: ${rsiValue}">${rsiValue}</div>`;
        }

        function getRSIColorClass(rsi) {
            if (rsi === null || rsi === undefined) return 'rsi-loading';
            if (rsi <= 20) return 'rsi-extreme-oversold';
            if (rsi <= 30) return 'rsi-strong-oversold';
            if (rsi <= 40) return 'rsi-mild-oversold';
            if (rsi >= 80) return 'rsi-extreme-overbought';
            if (rsi >= 70) return 'rsi-strong-overbought';
            if (rsi >= 60) return 'rsi-mild-overbought';
            return 'rsi-neutral';
        }

        function isExtremeRSI(token) {
            const rsiValues = Object.values(token.rsi).filter(v => v !== null);
            if (!rsiValues.length) return false;
            
            return rsiValues.some(rsi => rsi <= 20 || rsi >= 80);
        }

        // Utility Functions
        function formatPrice(price) {
            if (price >= 1000) return price.toLocaleString('en-US', { maximumFractionDigits: 2 });
            if (price >= 1) return price.toFixed(4);
            if (price >= 0.01) return price.toFixed(6);
            return price.toFixed(8);
        }

        function formatPercentage(value) {
            if (!value) return '0.00%';
            return (value > 0 ? '+' : '') + value.toFixed(2) + '%';
        }

        function getPriceChangeClass(change) {
            if (!change) return 'neutral';
            return change > 0 ? 'positive' : 'negative';
        }

        function truncateText(text, maxLength) {
            return text.length > maxLength ? text.slice(0, maxLength) + '...' : text;
        }

        // Search and Filter
        function filterTable() {
            const searchTerm = document.getElementById('tokenSearch').value.toLowerCase().trim();
            
            if (!searchTerm) {
                filteredData = [...tokenData];
            } else {
                filteredData = tokenData.filter(token => 
                    token.symbol.toLowerCase().includes(searchTerm) ||
                    token.name.toLowerCase().includes(searchTerm)
                );
            }
            
            updateTable();
        }

        // Sorting
        function sortTable(column) {
            if (currentSort.column === column) {
                currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
            } else {
                currentSort.column = column;
                currentSort.direction = 'desc'; // Most columns should default to desc
            }

            filteredData.sort((a, b) => {
                let aVal, bVal;

                switch(column) {
                    case 'rank':
                        aVal = tokenData.indexOf(a) + 1;
                        bVal = tokenData.indexOf(b) + 1;
                        break;
                    case 'symbol':
                        aVal = a.symbol;
                        bVal = b.symbol;
                        break;
                    case 'price':
                        aVal = a.price;
                        bVal = b.price;
                        break;
                    case 'change24h':
                        aVal = a.priceChange24h || 0;
                        bVal = b.priceChange24h || 0;
                        break;
                    case 'rsi1h':
                        aVal = a.rsi['1h'] || 50;
                        bVal = b.rsi['1h'] || 50;
                        break;
                    case 'rsi4h':
                        aVal = a.rsi['4h'] || 50;
                        bVal = b.rsi['4h'] || 50;
                        break;
                    case 'rsi1d':
                        aVal = a.rsi['1d'] || 50;
                        bVal = b.rsi['1d'] || 50;
                        break;
                    case 'rsi1w':
                        aVal = a.rsi['1w'] || 50;
                        bVal = b.rsi['1w'] || 50;
                        break;
                    case 'signal':
                        const signalOrder = { 'OVERSOLD': 0, 'OVERBOUGHT': 1, 'NEUTRAL': 2 };
                        aVal = signalOrder[a.signal];
                        bVal = signalOrder[b.signal];
                        break;
                    default:
                        return 0;
                }

                if (typeof aVal === 'string') {
                    return currentSort.direction === 'asc' ? 
                        aVal.localeCompare(bVal) : 
                        bVal.localeCompare(aVal);
                } else {
                    return currentSort.direction === 'asc' ? 
                        aVal - bVal : 
                        bVal - aVal;
                }
            });

            updateTable();
        }

        function updateSortHeaders() {
            document.querySelectorAll('.rsi-table th.sortable').forEach(th => {
                th.className = 'sortable';
            });

            if (currentSort.column) {
                const header = document.querySelector(`th[onclick*="${currentSort.column}"]`);
                if (header) {
                    header.className = `sortable sort-${currentSort.direction}`;
                }
            }
        }

        // Progress Updates
        function updateScanProgress(progress) {
            if (!progress) return;

            const statusText = progress.scanning ? 
                `Scanning batch ${progress.currentBatch}/${progress.totalBatches}... ${progress.withRSI}/${progress.total} tokens` :
                `Scan complete: ${progress.withRSI}/${progress.total} tokens have RSI data`;
            
            document.getElementById('scanStatus').textContent = statusText;
            
            const progressPercent = progress.total > 0 ? (progress.withRSI / progress.total) * 100 : 0;
            document.getElementById('progressFill').style.width = progressPercent + '%';
        }

        function updateStats(data) {
            const stats = data.stats || {};
            document.getElementById('tokensTrackedStat').textContent = stats.total || 0;
        }

        // UI Updates
        function updateRefreshButton(disabled) {
            const btn = document.getElementById('refreshBtn');
            btn.disabled = disabled;
            btn.innerHTML = disabled ? 
                '‚è≥ Loading...' : 
                'üîÑ Refresh Data';
        }

        function updateLastUpdateDisplay() {
            if (lastUpdateTime) {
                const timeAgo = getTimeAgo(lastUpdateTime);
                document.getElementById('lastUpdateTime').textContent = `Last updated: ${timeAgo}`;
            }
        }

        function getTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            if (seconds < 60) return `${seconds}s ago`;
            const minutes = Math.floor(seconds / 60);
            if (minutes < 60) return `${minutes}m ago`;
            const hours = Math.floor(minutes / 60);
            return `${hours}h ago`;
        }

        function showUpdateIndicator() {
            const indicator = document.getElementById('updateIndicator');
            indicator.classList.add('show');
            setTimeout(() => indicator.classList.remove('show'), 3000);
        }

        function showError(message) {
            const tbody = document.getElementById('rsiTableBody');
            tbody.innerHTML = `
                <tr>
                    <td colspan="10">
                        <div class="error-container">
                            <div class="error-title">Error Loading Data</div>
                            <div>${message}</div>
                        </div>
                    </td>
                </tr>
            `;
        }

        // Actions
        async function forceRefresh() {
            try {
                await fetch('/rsi/multi/scan', { method: 'POST' });
                setTimeout(() => loadData(), 2000); // Wait for scan to start
            } catch (error) {
                console.error('Force refresh failed:', error);
            }
        }

        // Navigation
        function showSection(sectionName) {
            // Update nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');

            // For this demo, all sections show the scanner
            // In a real app, you'd show/hide different sections
            console.log(`Navigating to ${sectionName}`);
        }

        // Auto-refresh
        function setupAutoRefresh() {
            // Refresh data every 60 seconds
            setInterval(() => {
                if (!isLoading) {
                    loadData();
                }
            }, 60000);

            // Update "time ago" display every 30 seconds
            setInterval(() => {
                updateLastUpdateDisplay();
            }, 30000);
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'r') {
                e.preventDefault();
                forceRefresh();
            }
            
            if (e.key === '/') {
                e.preventDefault();
                document.getElementById('tokenSearch').focus();
            }
        });
    </script>
</body>
</html>